{% extends "base.html" %}
{% block title %} US Congress {% endblock %}

{% block links %}
<link href="{{MEDIA_URL}}media/css/us-congress.css" rel="stylesheet">
<script src="{{MEDIA_URL}}media/js/us-congress.js" type="text/javascript"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false" type="text/javascript"></script>
<script>
var tweetData={{congressArray|safe}};

	var map;
	function initialize() {
		var mapOptions = {
			zoom : 8,
			center : new google.maps.LatLng(41.835265, -87.622279),
			mapTypeId : google.maps.MapTypeId.ROADMAP
		};
		var latLng;
		var marker;
		map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
		for (var i = 0; i < tweetData.length; i++) {
          // var coords = results.features[i].geometry.coordinates;
          latLng = new google.maps.LatLng(parseFloat(tweetData[i][8]),parseFloat(tweetData[i][7]));
          marker = new google.maps.Marker({
            position: latLng,
            map: map
          });
        }
	}


	google.maps.event.addDomListener(window, 'load', initialize); 
</script>
{% endblock %}
{% block javascript %}
max= {{ row|length }};{% endblock %}
{% block content %}

<div class="page-header" align="center">
	<h1>US Congress</h1>
</div>

<div class="container-fluid">
	<div class="row-fluid">
		<div align="center">
			<h4>Tweets</h4>
		</div>

		<div id="tweetbox" class="span8 offset2">
			{% for r in row %}

			<div id="container">
				<div id="example" class="tweets">
					<div class="tweet tweet-{{r.0}}" id="tweet-{{forloop.counter}}" style="display:none;">
						<img width="40" height="40" src={{r.3}}>
						<p class="text">
							<span class="username"><a href="http://twitter.com/#!/{{r.4}}">{{r.1}}</a>:</span> {{r.2}} <span class="time"><a href={{r.5	}}> {{r.0}} </a></span>
						</p>
					</div>
				</div>
			</div>
			{% endfor %}
			
		</div>
	</div>
	<br>
 
	<div class="row-fluid">
		<div class="span4">
			<div id="public-maps" class="well-large">
				<h3>Public</h3>
				Political Map
				<br>
				Netowrk Map
				<br>
				Congress Map
				<br>
			</div>

		</div>
		<div class="span4">
			<div id="centerdiv" class="well-large">
				<h3>Public</h3>
				Find Your Representative
				<br>
				Trends
				<br>
				Networks
				<br>
			</div>

		</div>
		<div class="span4">
			<div id="public-maps" class="well-large">
				<h3>Research</h3>
				Data Retrieved
				<br>
				Request Information
				<br>
			</div>
		</div>
	</div>
<br><br>

<div class="page-header" align="center">
	<h1>Political Maps</h1>
</div>
	<div class="row-fluid">
		<div class="well-large">
			<div class="span4 ofset3">
				<div id="map-canvas"></div>
			</div>
		</div>
	</div>

</div>

{% endblock %}
